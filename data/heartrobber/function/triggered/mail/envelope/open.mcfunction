function heartrobber:triggered/mail/envelope/summon with entity @s SelectedItem.components."minecraft:custom_data"."heartrobber:envelope"
execute unless data entity @s SelectedItem.components."minecraft:custom_data"."heartrobber:returned" run data modify storage heartrobber:mail temp.sender set from entity @s SelectedItem.components."minecraft:lore"[0]."text"
execute if data entity @s SelectedItem.components."minecraft:custom_data"."heartrobber:returned" run data modify storage heartrobber:mail temp.sender set from entity @s SelectedItem.components."minecraft:custom_data"."heartrobber:returned"
item replace entity @s weapon.mainhand with trial_key[item_model="heartrobber:empty_envelope",item_name={translate: "item.heartrobber.empty_envelope"},custom_data={"heartrobber:type": 18b},consumable={consume_seconds: 3.40282347e+38},food={saturation: 0, nutrition: 0, can_always_eat: true}]
function heartrobber:triggered/mail/envelope/resend_prep with storage heartrobber:mail temp
advancement revoke @s only heartrobber:using_sent_envelope