execute as @e[tag=heartrobber_relay] at @s positioned ~ ~0.5 ~ if block ~ ~1 ~ decorated_pot{item:{id:"minecraft:end_crystal"}} if block ~ ~-1 ~ decorated_pot{item:{id:"minecraft:compass",components:{"minecraft:lodestone_tracker":{"target":{"dimension":"minecraft:the_end"}}}}} if dimension minecraft:the_end unless data entity @n[tag=heartrobber_relayBlock,distance=..0.01] {item:{components:{"minecraft:item_model":"heartrobber:ender_relay_on"}}} run playsound minecraft:item.lodestone_compass.lock block @a ~ ~ ~ 1 2
execute as @e[tag=heartrobber_relay] at @s positioned ~ ~0.5 ~ if block ~ ~1 ~ decorated_pot{item:{id:"minecraft:end_crystal"}} if block ~ ~-1 ~ decorated_pot{item:{id:"minecraft:compass",components:{"minecraft:lodestone_tracker":{"target":{"dimension":"minecraft:the_end"}}}}} if dimension minecraft:the_end run data modify entity @n[tag=heartrobber_relayBlock,distance=..0.01] item.components."minecraft:item_model" set value "heartrobber:ender_relay_on"

execute as @e[tag=heartrobber_relay] at @s positioned ~ ~0.5 ~ unless block ~ ~1 ~ decorated_pot{item:{id:"minecraft:end_crystal"}} unless data entity @n[tag=heartrobber_relayBlock,distance=..0.01] {item:{components:{"minecraft:item_model":"heartrobber:ender_relay"}}} run playsound minecraft:block.trial_spawner.spawn_item block @a ~ ~ ~ 1 2
execute as @e[tag=heartrobber_relay] at @s positioned ~ ~0.5 ~ unless block ~ ~1 ~ decorated_pot{item:{id:"minecraft:end_crystal"}} run data modify entity @n[tag=heartrobber_relayBlock,distance=..0.01] item.components."minecraft:item_model" set value "heartrobber:ender_relay"

execute as @e[tag=heartrobber_relay] at @s positioned ~ ~0.5 ~ unless block ~ ~-1 ~ decorated_pot{item:{id:"minecraft:compass",components:{"minecraft:lodestone_tracker":{"target":{"dimension":"minecraft:the_end"}}}}} unless data entity @n[tag=heartrobber_relayBlock,distance=..0.01] {item:{components:{"minecraft:item_model":"heartrobber:ender_relay"}}} run playsound minecraft:block.trial_spawner.spawn_item block @a ~ ~ ~ 1 2
execute as @e[tag=heartrobber_relay] at @s positioned ~ ~0.5 ~ unless block ~ ~-1 ~ decorated_pot{item:{id:"minecraft:compass",components:{"minecraft:lodestone_tracker":{"target":{"dimension":"minecraft:the_end"}}}}} run data modify entity @n[tag=heartrobber_relayBlock,distance=..0.01] item.components."minecraft:item_model" set value "heartrobber:ender_relay"

execute as @e[tag=heartrobber_relay] at @s positioned ~ ~0.5 ~ unless dimension minecraft:the_end unless data entity @n[tag=heartrobber_relayBlock,distance=..0.01] {item:{components:{"minecraft:item_model":"heartrobber:ender_relay"}}} run playsound minecraft:block.trial_spawner.spawn_item block @a ~ ~ ~ 1 2
execute as @e[tag=heartrobber_relay] at @s positioned ~ ~0.5 ~ unless dimension minecraft:the_end run data modify entity @n[tag=heartrobber_relayBlock,distance=..0.01] item.components."minecraft:item_model" set value "heartrobber:ender_relay"

execute as @e[tag=heartrobber_relayBlock,distance=..0.01,nbt={item:{components:{"minecraft:item_model":"heartrobber:ender_relay"}}}] run data merge entity @s {brightness:{block:0b,sky:15b}}
execute as @e[tag=heartrobber_relayBlock,distance=..0.01,nbt={item:{components:{"minecraft:item_model":"heartrobber:ender_relay_on"}}}] run data merge entity @s {brightness:{block:8b,sky:15b}}